(function(v,d){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(g){return d(v,g)}):"object"==typeof module&&module.exports?module.exports=d(v,require("jquery")):v.jQueryBridget=d(v,v.jQuery)})(window,function(d,g){"use strict";var c=Array.prototype.slice,h=d.console,a=typeof h>"u"?function(){}:function(f){h.error(f)};function o(f,z,u){(u=u||g||d.jQuery)&&(z.prototype.option||(z.prototype.option=function(m){u.isPlainObject(m)&&(this.options=u.extend(!0,this.options,m))}),u.fn[f]=function(m){return"string"==typeof m?function _(m,l,i){var t,e="$()."+f+'("'+l+'")';return m.each(function(n,p){var y=u.data(p,f);if(y){var E=y[l];if(E&&"_"!=l.charAt(0)){var x=E.apply(y,i);t=void 0===t?x:t}else a(e+" is not a valid method")}else a(f+" not initialized. Cannot call methods, i.e. "+e)}),void 0!==t?t:m}(this,m,c.call(arguments,1)):(function r(m,l){m.each(function(i,t){var e=u.data(t,f);e?(e.option(l),e._init()):(e=new z(t,l),u.data(t,f,e))})}(this,m),this)},s(u))}function s(f){!f||f&&f.bridget||(f.bridget=o)}return s(g||d.jQuery),o}),function(v,d){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",d):"object"==typeof module&&module.exports?module.exports=d():v.EvEmitter=d()}(typeof window<"u"?window:this,function(){function v(){}var d=v.prototype;return d.on=function(g,c){if(g&&c){var h=this._events=this._events||{},a=h[g]=h[g]||[];return-1==a.indexOf(c)&&a.push(c),this}},d.once=function(g,c){if(g&&c){this.on(g,c);var h=this._onceEvents=this._onceEvents||{};return(h[g]=h[g]||{})[c]=!0,this}},d.off=function(g,c){var h=this._events&&this._events[g];if(h&&h.length){var a=h.indexOf(c);return-1!=a&&h.splice(a,1),this}},d.emitEvent=function(g,c){var h=this._events&&this._events[g];if(h&&h.length){h=h.slice(0),c=c||[];for(var a=this._onceEvents&&this._onceEvents[g],o=0;o<h.length;o++){var s=h[o];a&&a[s]&&(this.off(g,s),delete a[s]),s.apply(this,c)}return this}},d.allOff=function(){delete this._events,delete this._onceEvents},v}),function(v,d){"function"==typeof define&&define.amd?define("get-size/get-size",d):"object"==typeof module&&module.exports?module.exports=d():v.getSize=d()}(window,function(){"use strict";function d(r){var m=parseFloat(r);return-1==r.indexOf("%")&&!isNaN(m)&&m}var c=typeof console>"u"?function g(){}:function(r){console.error(r)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],a=h.length;function s(r){var m=getComputedStyle(r);return m||c("Style returned "+m+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),m}var z,f=!1;return function _(r){if(function u(){if(!f){f=!0;var r=document.createElement("div");r.style.width="200px",r.style.padding="1px 2px 3px 4px",r.style.borderStyle="solid",r.style.borderWidth="1px 2px 3px 4px",r.style.boxSizing="border-box";var m=document.body||document.documentElement;m.appendChild(r);var l=s(r);z=200==Math.round(d(l.width)),_.isBoxSizeOuter=z,m.removeChild(r)}}(),"string"==typeof r&&(r=document.querySelector(r)),r&&"object"==typeof r&&r.nodeType){var m=s(r);if("none"==m.display)return function o(){for(var r={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},m=0;m<a;m++)r[h[m]]=0;return r}();var l={};l.width=r.offsetWidth,l.height=r.offsetHeight;for(var i=l.isBorderBox="border-box"==m.boxSizing,t=0;t<a;t++){var e=h[t],p=parseFloat(m[e]);l[e]=isNaN(p)?0:p}var y=l.paddingLeft+l.paddingRight,E=l.paddingTop+l.paddingBottom,x=l.marginLeft+l.marginRight,b=l.marginTop+l.marginBottom,T=l.borderLeftWidth+l.borderRightWidth,S=l.borderTopWidth+l.borderBottomWidth,I=i&&z,W=d(m.width);!1!==W&&(l.width=W+(I?0:y+T));var O=d(m.height);return!1!==O&&(l.height=O+(I?0:E+S)),l.innerWidth=l.width-(y+T),l.innerHeight=l.height-(E+S),l.outerWidth=l.width+x,l.outerHeight=l.height+b,l}}}),function(v,d){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",d):"object"==typeof module&&module.exports?module.exports=d():v.matchesSelector=d()}(window,function(){"use strict";var d=function(){var g=window.Element.prototype;if(g.matches)return"matches";if(g.matchesSelector)return"matchesSelector";for(var c=["webkit","moz","ms","o"],h=0;h<c.length;h++){var o=c[h]+"MatchesSelector";if(g[o])return o}}();return function(c,h){return c[d](h)}}),function(v,d){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(g){return d(v,g)}):"object"==typeof module&&module.exports?module.exports=d(v,require("desandro-matches-selector")):v.fizzyUIUtils=d(v,v.matchesSelector)}(window,function(d,g){var c={extend:function(o,s){for(var f in s)o[f]=s[f];return o},modulo:function(o,s){return(o%s+s)%s}},h=Array.prototype.slice;c.makeArray=function(o){return Array.isArray(o)?o:null==o?[]:"object"==typeof o&&"number"==typeof o.length?h.call(o):[o]},c.removeFrom=function(o,s){var f=o.indexOf(s);-1!=f&&o.splice(f,1)},c.getParent=function(o,s){for(;o.parentNode&&o!=document.body;)if(g(o=o.parentNode,s))return o},c.getQueryElement=function(o){return"string"==typeof o?document.querySelector(o):o},c.handleEvent=function(o){var s="on"+o.type;this[s]&&this[s](o)},c.filterFindElements=function(o,s){o=c.makeArray(o);var f=[];return o.forEach(function(z){if(z instanceof HTMLElement){if(!s)return void f.push(z);g(z,s)&&f.push(z);for(var u=z.querySelectorAll(s),_=0;_<u.length;_++)f.push(u[_])}}),f},c.debounceMethod=function(o,s,f){f=f||100;var z=o.prototype[s],u=s+"Timeout";o.prototype[s]=function(){clearTimeout(this[u]);var r=arguments,m=this;this[u]=setTimeout(function(){z.apply(m,r),delete m[u]},f)}},c.docReady=function(o){var s=document.readyState;"complete"==s||"interactive"==s?setTimeout(o):document.addEventListener("DOMContentLoaded",o)},c.toDashed=function(o){return o.replace(/(.)([A-Z])/g,function(s,f,z){return f+"-"+z}).toLowerCase()};var a=d.console;return c.htmlInit=function(o,s){c.docReady(function(){var f=c.toDashed(s),z="data-"+f,u=document.querySelectorAll("["+z+"]"),_=document.querySelectorAll(".js-"+f),r=c.makeArray(u).concat(c.makeArray(_)),m=z+"-options",l=d.jQuery;r.forEach(function(i){var e,t=i.getAttribute(z)||i.getAttribute(m);try{e=t&&JSON.parse(t)}catch(p){return void(a&&a.error("Error parsing "+z+" on "+i.className+": "+p))}var n=new o(i,e);l&&l.data(i,s,n)})})},c}),function(v,d){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],d):"object"==typeof module&&module.exports?module.exports=d(require("ev-emitter"),require("get-size")):(v.Outlayer={},v.Outlayer.Item=d(v.EvEmitter,v.getSize))}(window,function(d,g){"use strict";var h=document.documentElement.style,a="string"==typeof h.transition?"transition":"WebkitTransition",o="string"==typeof h.transform?"transform":"WebkitTransform",s={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[a],f={transform:o,transition:a,transitionDuration:a+"Duration",transitionProperty:a+"Property",transitionDelay:a+"Delay"};function z(i,t){i&&(this.element=i,this.layout=t,this.position={x:0,y:0},this._create())}var u=z.prototype=Object.create(d.prototype);u.constructor=z,u._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},u.handleEvent=function(i){var t="on"+i.type;this[t]&&this[t](i)},u.getSize=function(){this.size=g(this.element)},u.css=function(i){var t=this.element.style;for(var e in i)t[f[e]||e]=i[e]},u.getPosition=function(){var i=getComputedStyle(this.element),t=this.layout._getOption("originLeft"),e=this.layout._getOption("originTop"),n=i[t?"left":"right"],p=i[e?"top":"bottom"],y=parseFloat(n),E=parseFloat(p),x=this.layout.size;-1!=n.indexOf("%")&&(y=y/100*x.width),-1!=p.indexOf("%")&&(E=E/100*x.height),y=isNaN(y)?0:y,E=isNaN(E)?0:E,E-=e?x.paddingTop:x.paddingBottom,this.position.x=y-=t?x.paddingLeft:x.paddingRight,this.position.y=E},u.layoutPosition=function(){var i=this.layout.size,t={},e=this.layout._getOption("originLeft"),n=this.layout._getOption("originTop"),E=e?"right":"left";t[e?"left":"right"]=this.getXValue(this.position.x+i[e?"paddingLeft":"paddingRight"]),t[E]="";var S=n?"bottom":"top";t[n?"top":"bottom"]=this.getYValue(this.position.y+i[n?"paddingTop":"paddingBottom"]),t[S]="",this.css(t),this.emitEvent("layout",[this])},u.getXValue=function(i){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!t?i/this.layout.size.width*100+"%":i+"px"},u.getYValue=function(i){var t=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&t?i/this.layout.size.height*100+"%":i+"px"},u._transitionTo=function(i,t){this.getPosition();var e=this.position.x,n=this.position.y,p=i==this.position.x&&t==this.position.y;if(this.setPosition(i,t),!p||this.isTransitioning){var x={};x.transform=this.getTranslate(i-e,t-n),this.transition({to:x,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})}else this.layoutPosition()},u.getTranslate=function(i,t){return"translate3d("+(i=this.layout._getOption("originLeft")?i:-i)+"px, "+(t=this.layout._getOption("originTop")?t:-t)+"px, 0)"},u.goTo=function(i,t){this.setPosition(i,t),this.layoutPosition()},u.moveTo=u._transitionTo,u.setPosition=function(i,t){this.position.x=parseFloat(i),this.position.y=parseFloat(t)},u._nonTransition=function(i){for(var t in this.css(i.to),i.isCleaning&&this._removeStyles(i.to),i.onTransitionEnd)i.onTransitionEnd[t].call(this)},u.transition=function(i){if(parseFloat(this.layout.options.transitionDuration)){var t=this._transn;for(var e in i.onTransitionEnd)t.onEnd[e]=i.onTransitionEnd[e];for(e in i.to)t.ingProperties[e]=!0,i.isCleaning&&(t.clean[e]=!0);i.from&&this.css(i.from),this.enableTransition(i.to),this.css(i.to),this.isTransitioning=!0}else this._nonTransition(i)};var r="opacity,"+function _(i){return i.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}(o);u.enableTransition=function(){if(!this.isTransitioning){var i=this.layout.options.transitionDuration;this.css({transitionProperty:r,transitionDuration:i="number"==typeof i?i+"ms":i,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(s,this,!1)}},u.onwebkitTransitionEnd=function(i){this.ontransitionend(i)},u.onotransitionend=function(i){this.ontransitionend(i)};var m={"-webkit-transform":"transform"};u.ontransitionend=function(i){if(i.target===this.element){var t=this._transn,e=m[i.propertyName]||i.propertyName;delete t.ingProperties[e],function c(i){for(var t in i)return!1;return!0}(t.ingProperties)&&this.disableTransition(),e in t.clean&&(this.element.style[i.propertyName]="",delete t.clean[e]),e in t.onEnd&&(t.onEnd[e].call(this),delete t.onEnd[e]),this.emitEvent("transitionEnd",[this])}},u.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(s,this,!1),this.isTransitioning=!1},u._removeStyles=function(i){var t={};for(var e in i)t[e]="";this.css(t)};var l={transitionProperty:"",transitionDuration:"",transitionDelay:""};return u.removeTransitionStyles=function(){this.css(l)},u.stagger=function(i){i=isNaN(i)?0:i,this.staggerDelay=i+"ms"},u.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},u.remove=function(){a&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),this.hide()):this.removeElem()},u.reveal=function(){delete this.isHidden,this.css({display:""});var i=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:i.hiddenStyle,to:i.visibleStyle,isCleaning:!0,onTransitionEnd:t})},u.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},u.getHideRevealTransitionEndProperty=function(i){var t=this.layout.options[i];if(t.opacity)return"opacity";for(var e in t)return e},u.hide=function(){this.isHidden=!0,this.css({display:""});var i=this.layout.options,t={};t[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:i.visibleStyle,to:i.hiddenStyle,isCleaning:!0,onTransitionEnd:t})},u.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},u.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},z}),function(v,d){"use strict";"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(g,c,h,a){return d(v,g,c,h,a)}):"object"==typeof module&&module.exports?module.exports=d(v,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):v.Outlayer=d(v,v.EvEmitter,v.getSize,v.fizzyUIUtils,v.Outlayer.Item)}(window,function(d,g,c,h,a){"use strict";var o=d.console,s=d.jQuery,f=function(){},z=0,u={};function _(t,e){var n=h.getQueryElement(t);if(n){this.element=n,s&&(this.$element=s(this.element)),this.options=h.extend({},this.constructor.defaults),this.option(e);var p=++z;this.element.outlayerGUID=p,u[p]=this,this._create(),this._getOption("initLayout")&&this.layout()}else o&&o.error("Bad element for "+this.constructor.namespace+": "+(n||t))}_.namespace="outlayer",_.Item=a,_.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var r=_.prototype;function m(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e,e}h.extend(r,g.prototype),r.option=function(t){h.extend(this.options,t)},r._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},_.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},r._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),h.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},r.reloadItems=function(){this.items=this._itemize(this.element.children)},r._itemize=function(t){for(var e=this._filterFindItemElements(t),n=this.constructor.Item,p=[],y=0;y<e.length;y++){var x=new n(e[y],this);p.push(x)}return p},r._filterFindItemElements=function(t){return h.filterFindElements(t,this.options.itemSelector)},r.getItemElements=function(){return this.items.map(function(t){return t.element})},r.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant");this.layoutItems(this.items,void 0!==t?t:!this._isLayoutInited),this._isLayoutInited=!0},r._init=r.layout,r._resetLayout=function(){this.getSize()},r.getSize=function(){this.size=c(this.element)},r._getMeasurement=function(t,e){var p,n=this.options[t];n?("string"==typeof n?p=this.element.querySelector(n):n instanceof HTMLElement&&(p=n),this[t]=p?c(p)[e]:n):this[t]=0},r.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},r._getItemsForLayout=function(t){return t.filter(function(e){return!e.isIgnored})},r._layoutItems=function(t,e){if(this._emitCompleteOnItems("layout",t),t&&t.length){var n=[];t.forEach(function(p){var y=this._getItemLayoutPosition(p);y.item=p,y.isInstant=e||p.isLayoutInstant,n.push(y)},this),this._processLayoutQueue(n)}},r._getItemLayoutPosition=function(){return{x:0,y:0}},r._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(e,n){this._positionItem(e.item,e.x,e.y,e.isInstant,n)},this)},r.updateStagger=function(){var t=this.options.stagger;if(null!=t)return this.stagger=function i(t){if("number"==typeof t)return t;var e=t.match(/(^\d*\.?\d*)(\w*)/),n=e&&e[1],p=e&&e[2];return n.length?(n=parseFloat(n))*(l[p]||1):0}(t),this.stagger;this.stagger=0},r._positionItem=function(t,e,n,p,y){p?t.goTo(e,n):(t.stagger(y*this.stagger),t.moveTo(e,n))},r._postLayout=function(){this.resizeContainer()},r.resizeContainer=function(){if(this._getOption("resizeContainer")){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},r._getContainerSize=f,r._setContainerMeasure=function(t,e){if(void 0!==t){var n=this.size;n.isBorderBox&&(t+=e?n.paddingLeft+n.paddingRight+n.borderLeftWidth+n.borderRightWidth:n.paddingBottom+n.paddingTop+n.borderTopWidth+n.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px"}},r._emitCompleteOnItems=function(t,e){var n=this;function p(){n.dispatchEvent(t+"Complete",null,[e])}var y=e.length;if(e&&y){var E=0;e.forEach(function(b){b.once(t,x)})}else p();function x(){++E==y&&p()}},r.dispatchEvent=function(t,e,n){var p=e?[e].concat(n):n;if(this.emitEvent(t,p),s)if(this.$element=this.$element||s(this.element),e){var y=s.Event(e);y.type=t,this.$element.trigger(y,n)}else this.$element.trigger(t,n)},r.ignore=function(t){var e=this.getItem(t);e&&(e.isIgnored=!0)},r.unignore=function(t){var e=this.getItem(t);e&&delete e.isIgnored},r.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},r.unstamp=function(t){(t=this._find(t))&&t.forEach(function(e){h.removeFrom(this.stamps,e),this.unignore(e)},this)},r._find=function(t){if(t)return"string"==typeof t&&(t=this.element.querySelectorAll(t)),h.makeArray(t)},r._manageStamps=function(){!this.stamps||!this.stamps.length||(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},r._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},r._manageStamp=f,r._getElementOffset=function(t){var e=t.getBoundingClientRect(),n=this._boundingRect,p=c(t);return{left:e.left-n.left-p.marginLeft,top:e.top-n.top-p.marginTop,right:n.right-e.right-p.marginRight,bottom:n.bottom-e.bottom-p.marginBottom}},r.handleEvent=h.handleEvent,r.bindResize=function(){d.addEventListener("resize",this),this.isResizeBound=!0},r.unbindResize=function(){d.removeEventListener("resize",this),this.isResizeBound=!1},r.onresize=function(){this.resize()},h.debounceMethod(_,"onresize",100),r.resize=function(){!this.isResizeBound||!this.needsResizeLayout()||this.layout()},r.needsResizeLayout=function(){var t=c(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},r.addItems=function(t){var e=this._itemize(t);return e.length&&(this.items=this.items.concat(e)),e},r.appended=function(t){var e=this.addItems(t);e.length&&(this.layoutItems(e,!0),this.reveal(e))},r.prepended=function(t){var e=this._itemize(t);if(e.length){var n=this.items.slice(0);this.items=e.concat(n),this._resetLayout(),this._manageStamps(),this.layoutItems(e,!0),this.reveal(e),this.layoutItems(n)}},r.reveal=function(t){if(this._emitCompleteOnItems("reveal",t),t&&t.length){var e=this.updateStagger();t.forEach(function(n,p){n.stagger(p*e),n.reveal()})}},r.hide=function(t){if(this._emitCompleteOnItems("hide",t),t&&t.length){var e=this.updateStagger();t.forEach(function(n,p){n.stagger(p*e),n.hide()})}},r.revealItemElements=function(t){var e=this.getItems(t);this.reveal(e)},r.hideItemElements=function(t){var e=this.getItems(t);this.hide(e)},r.getItem=function(t){for(var e=0;e<this.items.length;e++){var n=this.items[e];if(n.element==t)return n}},r.getItems=function(t){t=h.makeArray(t);var e=[];return t.forEach(function(n){var p=this.getItem(n);p&&e.push(p)},this),e},r.remove=function(t){var e=this.getItems(t);this._emitCompleteOnItems("remove",e),e&&e.length&&e.forEach(function(n){n.remove(),h.removeFrom(this.items,n)},this)},r.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(n){n.destroy()}),this.unbindResize(),delete u[this.element.outlayerGUID],delete this.element.outlayerGUID,s&&s.removeData(this.element,this.constructor.namespace)},_.data=function(t){var e=(t=h.getQueryElement(t))&&t.outlayerGUID;return e&&u[e]},_.create=function(t,e){var n=m(_);return n.defaults=h.extend({},_.defaults),h.extend(n.defaults,e),n.compatOptions=h.extend({},_.compatOptions),n.namespace=t,n.data=_.data,n.Item=m(a),h.htmlInit(n,t),s&&s.bridget&&s.bridget(t,n),n};var l={ms:1,s:1e3};return _.Item=a,_}),function(v,d){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],d):"object"==typeof module&&module.exports?module.exports=d(require("outlayer"),require("get-size")):v.Masonry=d(v.Outlayer,v.getSize)}(window,function(d,g){var c=d.create("masonry");c.compatOptions.fitWidth="isFitWidth";var h=c.prototype;return h._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var a=0;a<this.cols;a++)this.colYs.push(0);this.maxY=0,this.horizontalColIndex=0},h.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],o=a&&a.element;this.columnWidth=o&&g(o).outerWidth||this.containerWidth}var s=this.columnWidth+=this.gutter,f=this.containerWidth+this.gutter,z=f/s,u=s-f%s;z=Math[u&&u<1?"round":"floor"](z),this.cols=Math.max(z,1)},h.getContainerWidth=function(){var a=this._getOption("fitWidth"),s=g(a?this.element.parentNode:this.element);this.containerWidth=s&&s.innerWidth},h._getItemLayoutPosition=function(a){a.getSize();var o=a.size.outerWidth%this.columnWidth,f=Math[o&&o<1?"round":"ceil"](a.size.outerWidth/this.columnWidth);f=Math.min(f,this.cols);for(var u=this[this.options.horizontalOrder?"_getHorizontalColPosition":"_getTopColPosition"](f,a),_={x:this.columnWidth*u.col,y:u.y},r=u.y+a.size.outerHeight,m=f+u.col,l=u.col;l<m;l++)this.colYs[l]=r;return _},h._getTopColPosition=function(a){var o=this._getTopColGroup(a),s=Math.min.apply(Math,o);return{col:o.indexOf(s),y:s}},h._getTopColGroup=function(a){if(a<2)return this.colYs;for(var o=[],s=this.cols+1-a,f=0;f<s;f++)o[f]=this._getColGroupY(f,a);return o},h._getColGroupY=function(a,o){if(o<2)return this.colYs[a];var s=this.colYs.slice(a,a+o);return Math.max.apply(Math,s)},h._getHorizontalColPosition=function(a,o){var s=this.horizontalColIndex%this.cols;return s=a>1&&s+a>this.cols?0:s,this.horizontalColIndex=o.size.outerWidth&&o.size.outerHeight?s+a:this.horizontalColIndex,{col:s,y:this._getColGroupY(s,a)}},h._manageStamp=function(a){var o=g(a),s=this._getElementOffset(a),z=this._getOption("originLeft")?s.left:s.right,u=z+o.outerWidth,_=Math.floor(z/this.columnWidth);_=Math.max(0,_);var r=Math.floor(u/this.columnWidth);r-=u%this.columnWidth?0:1,r=Math.min(this.cols-1,r);for(var l=(this._getOption("originTop")?s.top:s.bottom)+o.outerHeight,i=_;i<=r;i++)this.colYs[i]=Math.max(l,this.colYs[i])},h._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this._getOption("fitWidth")&&(a.width=this._getContainerFitWidth()),a},h._getContainerFitWidth=function(){for(var a=0,o=this.cols;--o&&0===this.colYs[o];)a++;return(this.cols-a)*this.columnWidth-this.gutter},h.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!=this.containerWidth},c});